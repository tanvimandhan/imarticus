{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\vikas\\\\Desktop\\\\imarticus1\\\\frontend\\\\src\\\\components\\\\DocumentUpload.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { documentService } from '../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction DocumentUpload(props) {\n  _s();\n  const courseId = props.courseId;\n  const onUploadSuccess = props.onUploadSuccess;\n  const [file, setFile] = useState(null);\n  const [title, setTitle] = useState('');\n  const [description, setDescription] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState('');\n\n  // handle file change\n  function handleFileChange(e) {\n    console.log('file selected');\n    const selectedFile = e.target.files[0];\n    setFile(selectedFile);\n  }\n\n  // handle title change\n  function handleTitleChange(e) {\n    console.log('title changed');\n    setTitle(e.target.value);\n  }\n\n  // handle description change\n  function handleDescriptionChange(e) {\n    console.log('description changed');\n    setDescription(e.target.value);\n  }\n\n  // handle form submit\n  async function handleSubmit(e) {\n    e.preventDefault();\n    console.log('form submitted');\n\n    // check if file and title are filled\n    if (!file || !title) {\n      console.log('file or title missing');\n      setMessage('Please fill in all required fields');\n      return;\n    }\n\n    // make form data\n    const formData = new FormData();\n    formData.append('file', file);\n    formData.append('title', title);\n    formData.append('description', description);\n    formData.append('courseId', courseId);\n    setLoading(true);\n    try {\n      console.log('uploading document');\n      await documentService.uploadDocument(formData);\n      console.log('upload successful');\n      setMessage('Document uploaded successfully!');\n      setFile(null);\n      setTitle('');\n      setDescription('');\n      if (onUploadSuccess) {\n        onUploadSuccess();\n      }\n    } catch (error) {\n      console.log('upload error: ' + error);\n      let errorMsg = 'Upload failed';\n      if (error.response && error.response.data && error.response.data.message) {\n        errorMsg = error.response.data.message;\n      } else if (error.message) {\n        errorMsg = error.message;\n      }\n      setMessage('Upload failed: ' + errorMsg);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  // check message type\n  let messageClass = 'success';\n  if (message.includes('failed')) {\n    messageClass = 'danger';\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card p-4 mb-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n      className: \"card-title\",\n      children: \"Upload Document\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this), message && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: 'alert alert-' + messageClass,\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label\",\n          children: \"Document Title*\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: \"form-control\",\n          value: title,\n          onChange: handleTitleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label\",\n          children: \"Description\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          className: \"form-control\",\n          value: description,\n          onChange: handleDescriptionChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label\",\n          children: \"Select File*\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          className: \"form-control\",\n          onChange: handleFileChange,\n          accept: \".pdf,.txt,.doc,.docx\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-primary\",\n        disabled: loading,\n        children: loading ? 'Uploading...' : 'Upload Document'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 5\n  }, this);\n}\n_s(DocumentUpload, \"bWh4DoyV4QSqoA0gaLwY8G0rqbQ=\");\n_c = DocumentUpload;\nexport default DocumentUpload;\nvar _c;\n$RefreshReg$(_c, \"DocumentUpload\");","map":{"version":3,"names":["React","useState","documentService","jsxDEV","_jsxDEV","DocumentUpload","props","_s","courseId","onUploadSuccess","file","setFile","title","setTitle","description","setDescription","loading","setLoading","message","setMessage","handleFileChange","e","console","log","selectedFile","target","files","handleTitleChange","value","handleDescriptionChange","handleSubmit","preventDefault","formData","FormData","append","uploadDocument","error","errorMsg","response","data","messageClass","includes","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","onChange","required","accept","disabled","_c","$RefreshReg$"],"sources":["C:/Users/vikas/Desktop/imarticus1/frontend/src/components/DocumentUpload.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { documentService } from '../services/api';\n\nfunction DocumentUpload(props) {\n  const courseId = props.courseId;\n  const onUploadSuccess = props.onUploadSuccess;\n  const [file, setFile] = useState(null);\n  const [title, setTitle] = useState('');\n  const [description, setDescription] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState('');\n\n  // handle file change\n  function handleFileChange(e) {\n    console.log('file selected');\n    const selectedFile = e.target.files[0];\n    setFile(selectedFile);\n  }\n\n  // handle title change\n  function handleTitleChange(e) {\n    console.log('title changed');\n    setTitle(e.target.value);\n  }\n\n  // handle description change\n  function handleDescriptionChange(e) {\n    console.log('description changed');\n    setDescription(e.target.value);\n  }\n\n  // handle form submit\n  async function handleSubmit(e) {\n    e.preventDefault();\n    console.log('form submitted');\n    \n    // check if file and title are filled\n    if (!file || !title) {\n      console.log('file or title missing');\n      setMessage('Please fill in all required fields');\n      return;\n    }\n\n    // make form data\n    const formData = new FormData();\n    formData.append('file', file);\n    formData.append('title', title);\n    formData.append('description', description);\n    formData.append('courseId', courseId);\n\n    setLoading(true);\n    try {\n      console.log('uploading document');\n      await documentService.uploadDocument(formData);\n      console.log('upload successful');\n      setMessage('Document uploaded successfully!');\n      setFile(null);\n      setTitle('');\n      setDescription('');\n      if (onUploadSuccess) {\n        onUploadSuccess();\n      }\n    } catch (error) {\n      console.log('upload error: ' + error);\n      let errorMsg = 'Upload failed';\n      if (error.response && error.response.data && error.response.data.message) {\n        errorMsg = error.response.data.message;\n      } else if (error.message) {\n        errorMsg = error.message;\n      }\n      setMessage('Upload failed: ' + errorMsg);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  // check message type\n  let messageClass = 'success';\n  if (message.includes('failed')) {\n    messageClass = 'danger';\n  }\n\n  return (\n    <div className=\"card p-4 mb-4\">\n      <h5 className=\"card-title\">Upload Document</h5>\n      {message && (\n        <div className={'alert alert-' + messageClass}>\n          {message}\n        </div>\n      )}\n      <form onSubmit={handleSubmit}>\n        <div className=\"mb-3\">\n          <label className=\"form-label\">Document Title*</label>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            value={title}\n            onChange={handleTitleChange}\n            required\n          />\n        </div>\n        <div className=\"mb-3\">\n          <label className=\"form-label\">Description</label>\n          <textarea\n            className=\"form-control\"\n            value={description}\n            onChange={handleDescriptionChange}\n          />\n        </div>\n        <div className=\"mb-3\">\n          <label className=\"form-label\">Select File*</label>\n          <input\n            type=\"file\"\n            className=\"form-control\"\n            onChange={handleFileChange}\n            accept=\".pdf,.txt,.doc,.docx\"\n            required\n          />\n        </div>\n        <button type=\"submit\" className=\"btn btn-primary\" disabled={loading}>\n          {loading ? 'Uploading...' : 'Upload Document'}\n        </button>\n      </form>\n    </div>\n  );\n}\n\nexport default DocumentUpload;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}